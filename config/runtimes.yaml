# Runtime Configuration for Gas Town Verification Layer
#
# This file configures the available AI runtimes and their role assignments.
# The Auditor role uses an alternate runtime for independent code verification.
#
# IMPORTANT: Verification is MANDATORY. All code must be reviewed by an LLM
# before it can be merged. This cannot be disabled.

# Available runtimes and their CLI configurations
runtimes:
  claude:
    command: claude
    args: ["-p"]
    description: "Anthropic Claude - default runtime for all Gas Town agents"

  codex:
    command: codex
    args: ["-q"]
    description: "OpenAI Codex - preferred for independent verification"

  opencode:
    command: opencode
    args: ["-p"]
    description: "OpenCode - open-source alternative for local verification"

# Role to runtime assignments
# Each role specifies which runtime to use
roles:
  mayor: claude
  deacon: claude
  polecat: claude
  witness: claude
  refinery: claude
  crew: claude
  auditor: codex  # Different runtime for verification!

# Fallback chain for the auditor role
# If the primary runtime is not available, try these in order
# NOTE: At least ONE runtime MUST be available for verification to work
auditor_fallback:
  - codex      # Preferred: different model for true independent review
  - opencode   # Alternative: open-source option
  - claude     # Last resort: same model (still useful for second-pass review)

# Verification configuration
# NOTE: Verification is MANDATORY and cannot be disabled
verification:
  # Minimum confidence threshold for auto-approval
  # Results below this threshold escalate to NEEDS_HUMAN
  required_confidence: 0.7

  # Timeout for verification operations (seconds)
  timeout_seconds: 300

  # Require independent verification (different model than Claude)
  # If true, verification will FAIL if only Claude is available
  # If false, Claude can be used as fallback
  require_independent: false

  # Scope of verification - what gets verified
  # Options:
  #   all      - Every MR must pass verification
  #   critical - Only MRs with critical labels
  # NOTE: 'none' is not a valid option - verification cannot be skipped
  scope: all

  # Labels that indicate high-priority verification
  # These get flagged for extra scrutiny
  priority_labels:
    - security
    - critical
    - high-priority
    - breaking-change

# Verification ensures:
# - Code meets requirements as described in the task
# - No bugs or security vulnerabilities
# - Tests exist and pass
# - Code quality meets standards
# - Build succeeds without errors
